<%# options.ejs
  #
  # draw a page with app settings
%>

<!doctype html>
<head>
  <title>Survey Tracker - Settings</title>

  <link rel="stylesheet" type="text/css" href="css/styles.css">
</head>
<body>
  <!-- NAVBAR GOES HERE -->
  <% include ./ejs_partials/navbar.ejs %>

  <div id="main">
    <div class="settings-parent">
      <div class="settings-table">
        <div class="setting-container">
          <div class="setting-row">
            <span>
              Automatically stop tracking inactive surveys
            </span>
            <input type="checkbox" checked>
          </div>
        </div>

        <div class="setting-container">
          <div class="setting-row">
            <span>Check surveys for responses every</span>
            <span>
                <input type="number" step="5" style="width:4em;">
                min.
            </span>
          </div>
        </div>


        <div class="setting-container">
          <div class="setting-row">
            <span>
              Send text after every new response ($0.0075/msg)
            </span>
            <input id="send-text-toggle" type="checkbox">
          </div>

          <div class="setting-subrow">
            <textarea id="after-response-textarea" class="hidden" rows="4" cols="60" placeholder="Example: Great job %name%!"></textarea>
          </div>
        </div>

        <!-- Progress SMS schedule -->
        <div class="setting-container">
          <div class="setting-row">
            <span>Send progress reports every:</span>
          </div>
          
          <div class="setting-subrow schedule-row">
            <div>
              <label for="M">M</label>
              <input id="M" type="checkbox">
            </div>

            <div>
              <label for="T">T</label>
              <input id="T" type="checkbox">
            </div>

            <div>
              <label for="W">W</label>
              <input id="W" type="checkbox">
            </div>
  
            <div>
              <label for="R">R</label>
              <input id="R" type="checkbox">
            </div>

            <div>
              <label for="F">F</label>
              <input id="F" type="checkbox">
            </div>

            <div>
              <label for="S">S</label>
              <input id="S" type="checkbox">
            </div>

            <div>
              <label for="U">U</label>
              <input id="U" type="checkbox">
            </div>
          </div>

          <div class="setting-subrow">
            <span></span>
            <span>
              at <input id="progress-time" type="time">
            </span>
            
          </div>
        </div>

        <!-- SMS allowed schedule -->
        <div class="setting-container">
          <div class="setting-row">
            <span>
              Only send texts between:
            </span>
            <input id="allowed-time-toggle" type="checkbox">
          </div>

          <div class="setting-subrow">
            <div id="allowed-range" class="hidden">
              <input id="allowed-time-start" type="time">
              <span>and</span>
              <input id="allowed-time-end" type="time">
            </div>
          </div>
        </div>
      </div>

      <div class="settings-actions">
        <button>Cancel</button>
        <button>Apply</button>
      </div>
    </div>
  </div>

  <!-- JQUERY LIB -->
  <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.4.1/jquery.min.js"></script>

  <!-- LISTENERS -->
  <script>
    // toggle text response show/hide
    $("#send-text-toggle").change(function() {
      if (this.checked) {
        $("#after-response-textarea").removeClass("hidden");
      }
      else {
        $("#after-response-textarea").addClass("hidden");
      }
    });

    // toggle allowed schedule show/hide
    $("#allowed-time-toggle").change(function() {
      if (this.checked) {
        $("#allowed-range").removeClass("hidden");
      }
      else {
        $("#allowed-range").addClass("hidden");
      }
    });
  </script>
</body>